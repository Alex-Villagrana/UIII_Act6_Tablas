{% extends 'base.html' %}
{% block title %}Actualizar Producto{% endblock %}
{% block content %}
<div class="card shadow-sm">
    <div class="card-header bg-warning text-dark"><h5 class="mb-0"><i class="bi bi-pencil-square me-2"></i>Actualizar Producto</h5></div>
    <div class="card-body">
        <form method="post" action="{% url 'realizar_actualizacion_producto' pk=producto.pk %}" enctype="multipart/form-data">
            {% csrf_token %}
            <h6 class="card-subtitle mb-3 text-muted">Editando Producto: {{ producto.nombre }}</h6>
            <div class="row">
                <div class="col-md-6 mb-3"><label for="nombre" class="form-label">Nombre:</label><input type="text" class="form-control" id="nombre" name="nombre" value="{{ producto.nombre }}" required></div>
                <div class="col-md-6 mb-3"><label for="marca" class="form-label">Marca:</label><input type="text" class="form-control" id="marca" name="marca" value="{{ producto.marca }}" required></div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3"><label for="modelo" class="form-label">Modelo:</label><input type="text" class="form-control" id="modelo" name="modelo" value="{{ producto.modelo }}"></div>
                <div class="col-md-6 mb-3"><label for="precio" class="form-label">Precio:</label><input type="number" step="0.01" class="form-control" id="precio" name="precio" value="{{ producto.precio }}" required></div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3"><label for="stock" class="form-label">Stock:</label><input type="number" class="form-control" id="stock" name="stock" value="{{ producto.stock }}" required></div>
                <div class="col-md-6 mb-3"><label for="proveedor" class="form-label">Proveedor:</label>
                    <select class="form-control" id="proveedor" name="proveedor" required>
                        <option value="">Selecciona un proveedor</option>
                        {% for proveedor in proveedores %}
                        <option value="{{ proveedor.pk }}" {% if proveedor.pk == producto.proveedor.pk %}selected{% endif %}>{{ proveedor.contacto_nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="mb-3"><label for="descripcion" class="form-label">Descripci√≥n:</label><textarea class="form-control" id="descripcion" name="descripcion" rows="3">{{ producto.descripcion }}</textarea></div>
            <div class="mb-3"><label for="imagen" class="form-label">Imagen:</label><input type="file" class="form-control" id="imagen" name="imagen" accept="image/*">
            {% if producto.imagen %}<small class="form-text text-muted">Imagen actual: <a href="{{ producto.imagen.url }}" target="_blank">Ver imagen</a></small>{% endif %}</div>
            <div class="mb-3 form-check"><input type="checkbox" class="form-check-input" id="disponible" name="disponible" {% if producto.disponible %}checked{% endif %}><label class="form-check-label" for="disponible">Disponible</label></div>
            <button type="submit" class="btn btn-success"><i class="bi bi-check-circle-fill me-2"></i>Guardar Cambios</button>
            <a href="{% url 'ver_productos' %}" class="btn btn-secondary ms-2">Cancelar</a>
        </form>
    </div>
</div>
{% endblock %}
